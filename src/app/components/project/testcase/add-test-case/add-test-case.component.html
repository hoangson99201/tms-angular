<app-menu-project [projectId]="testCase.projectId + ''"></app-menu-project>

<div id="separator"></div>
<div id="body-container" class="">
  <div id="body" class="table" style="display: table;">
    <div id="content" class="column content overflow-content">


      <div id="content-header" class="content-header content-header-default">
        <div class="content-header-inner">
          <div class="content-header-result"></div>
          <div class="content-header-title page_title">
            Add Test Case </div>
        </div>
      </div>
      <div id="content-inner" class="content-inner goals-clear">
        <form action="index.php?/cases/add/1" id="form" method="post"><input type="hidden" name="_token"
            value="kyqRSAYnPxiKjL7HwuCW">

          <input type="hidden" id="attachments" name="attachments" value="">
          <input type="hidden" id="js_test" name="js_test" value="0">

          <div id="form-controls">

            <div class="form-group form-group-main">
              <label for="title">Title <span class="form-required">*</span></label>
              <input [(ngModel)]="testCase.caseName" class="form-control form-control-full form-fields " type="text"
                name="title" id="title" maxlength="250" value="">
            </div>

            <div class="io-container io-framed form-group table">

              <div class="column-p4 column">
                <label class="io-label" for="section_id">Section <span class="form-required">*</span></label>
                <select [(ngModel)]="testCase.sectionId" name="section_id" id="section_id"
                  class="form-control form-control-full form-select searchable  chzn-done" style="width: 100%;">
                  <option *ngFor="let section of sections" value="{{section.sectionId}}">
                    {{section.sectionName}}
                  </option>
                </select>
              </div>

              <div class="column-p4 column">
                <label class="io-label" for="priority_id">Priority <span class="form-required">*</span></label>
                <select [(ngModel)]="testCase.priorityId" name="priority_id" id="priority_id"
                  class="form-control form-control-full form-select searchable  chzn-done" style="width: 100%;">
                  <option *ngFor="let priority of priorities" value="{{priority.prioritiesId}}">
                    {{priority.priorityName}}
                  </option>
                </select>
              </div>

              <div class="column-p4 column">
                <label class="io-label" for="estimate">
                  Estimate </label>
                <input class="form-control form-control-full form-fields" type=" text" name="estimate" id="estimate"
                  maxlength="250" value="">
              </div>
            </div>

            <div class="form-group">
              <label for="custom_preconds">
                <span class="form-toolbar" style="padding-top: 0px">
                  <a routerLink="javascript:void(0)"
                    onclick="this.blur(); App.Editor.addTable('#custom_preconds' + '_display'); return false;"
                    class="link-tooltip" tooltip-text="Add a table to this text field." tabindex="-1">
                    <div class="icon-markdown-table"></div>
                  </a>
                  <a routerLink="javascript:void(0)"
                    onclick="this.blur(); App.Editor.addImage('#custom_preconds', 1, 'case', ''); return false;"
                    class="link-tooltip" tooltip-text="Add an image to this text field." tabindex="-1">
                    <div class="icon-markdown-image"></div>
                  </a>
                  <a routerLink="https://www.gurock.com/testrail/docs/user-guide/getting-started/editor"
                    class="link-tooltip" tooltip-text="Open the editor formatting reference." target="_blank"
                    tabindex="-1">
                    <div class="icon-markdown-help"></div>
                  </a>
                </span>
                Preconditions </label>
              <div class="textarea-resizable">
                <textarea [(ngModel)]="testCase.preconditions"
                  class="form-control form-control-full  processed textarea-with-grippie" rows="6" name="announcement"
                  id="announcement"></textarea>
                <div class="textarea-grippie"></div>
              </div>

              <div id="custom_preconds_display_drop" class="dropzone dz-clickable" rel="custom_preconds_display"
                dialog="" data-project-id="1">
                <div class="dz-default dz-message"><span>Drop images here to embed.</span></div>
              </div>

              <script type="text/javascript">
                $(document).ready(function () {
                  App.Editor.applyDrop({
                    'selector': '#' + 'custom_preconds_display_drop',
                    'control': '#' + 'custom_preconds_display',
                    'project_id': 1,
                    'can_attach': true,
                    'entity_type': 'case',
                    'entity_id': ''
                  });
                }
                );
              </script>

              <script type="text/javascript">
                $(document).ready(
                  function () {
                    if (window.location.search.indexOf('/suites/view/') > - 1) {
                      $.each($('.form-group textarea'), function (index, element) {
                        $(element).addClass('form-fields');
                      });
                    }
                    if ($('#custom_preconds_display').find('.attachment-list-delete-inline').length === 0) {
                      $('#custom_preconds_display .attachment-block').after('<div contenteditable="false" class="inlineAttachmentListRemove attachment-list-delete-inline" style="display: none;" routerLink="javascript:void(0)" onclick="App.Attachments.entityRemoveAttachmentsDialog(\'This <strong>deletes selected instances of your attachments.</strong> The files will keep on being stored on your Library. Go to Attachments on Data Storage to delete permanently.\', \'1\', \'case\', \'#custom_preconds_attachments_wrapper\'); $(\'#custom_preconds_display .inlineAttachmentListRemove\').hide(); return false;"><div class="attachment-list-delete-icon"></div><span>Delete</span></div><span contenteditable="false" class="inline-attachment-list-whitespace">&nbsp;</span>&nbsp;');
                    }
                  }
                );
              </script>
              <div class="form-description form-description-full">The preconditions of this test case.
                Reference other test cases with [C#] (e.g. [C17]).</div>
            </div>
            <div class="form-group">
              <label for="custom_steps">
                <span class="form-toolbar" style="padding-top: 0px">
                  <a routerLink="javascript:void(0)"
                    onclick="this.blur(); App.Editor.addTable('#custom_steps' + '_display'); return false;"
                    class="link-tooltip" tooltip-text="Add a table to this text field." tabindex="-1">
                    <div class="icon-markdown-table"></div>
                  </a>
                  <a routerLink="javascript:void(0)"
                    onclick="this.blur(); App.Editor.addImage('#custom_steps', 1, 'case', ''); return false;"
                    class="link-tooltip" tooltip-text="Add an image to this text field." tabindex="-1">
                    <div class="icon-markdown-image"></div>
                  </a>
                  <a routerLink="https://www.gurock.com/testrail/docs/user-guide/getting-started/editor"
                    class="link-tooltip" tooltip-text="Open the editor formatting reference." target="_blank"
                    tabindex="-1">
                    <div class="icon-markdown-help"></div>
                  </a>
                </span>
                Steps </label>
              <div class="textarea-resizable">
                <textarea [(ngModel)]="testCase.steps"
                  class="form-control form-control-full  processed textarea-with-grippie" rows="6" name="announcement"
                  id="announcement"></textarea>
                <div class="textarea-grippie"></div>
              </div>

              <div id="custom_steps_display_drop" class="dropzone dz-clickable" rel="custom_steps_display" dialog=""
                data-project-id="1">
                <div class="dz-default dz-message"><span>Drop images here to embed.</span></div>
              </div>

              <script type="text/javascript">
                $(document).ready(function () {
                  App.Editor.applyDrop({
                    'selector': '#' + 'custom_steps_display_drop',
                    'control': '#' + 'custom_steps_display',
                    'project_id': 1,
                    'can_attach': true,
                    'entity_type': 'case',
                    'entity_id': ''
                  });
                }
                );
              </script>

              <script type="text/javascript">
                $(document).ready(
                  function () {
                    if (window.location.search.indexOf('/suites/view/') > - 1) {
                      $.each($('.form-group textarea'), function (index, element) {
                        $(element).addClass('form-fields');
                      });
                    }
                    if ($('#custom_steps_display').find('.attachment-list-delete-inline').length === 0) {
                      $('#custom_steps_display .attachment-block').after('<div contenteditable="false" class="inlineAttachmentListRemove attachment-list-delete-inline" style="display: none;" routerLink="javascript:void(0)" onclick="App.Attachments.entityRemoveAttachmentsDialog(\'This <strong>deletes selected instances of your attachments.</strong> The files will keep on being stored on your Library. Go to Attachments on Data Storage to delete permanently.\', \'1\', \'case\', \'#custom_steps_attachments_wrapper\'); $(\'#custom_steps_display .inlineAttachmentListRemove\').hide(); return false;"><div class="attachment-list-delete-icon"></div><span>Delete</span></div><span contenteditable="false" class="inline-attachment-list-whitespace">&nbsp;</span>&nbsp;');
                    }
                  }
                );
              </script>
              <div class="form-description form-description-full">The required steps to execute the
                test case.</div>
            </div>
            <div class="form-group">
              <label for="custom_expected">
                <span class="form-toolbar" style="padding-top: 0px">
                  <a routerLink="javascript:void(0)"
                    onclick="this.blur(); App.Editor.addTable('#custom_expected' + '_display'); return false;"
                    class="link-tooltip" tooltip-text="Add a table to this text field." tabindex="-1">
                    <div class="icon-markdown-table"></div>
                  </a>
                  <a routerLink="javascript:void(0)"
                    onclick="this.blur(); App.Editor.addImage('#custom_expected', 1, 'case', ''); return false;"
                    class="link-tooltip" tooltip-text="Add an image to this text field." tabindex="-1">
                    <div class="icon-markdown-image"></div>
                  </a>
                  <a routerLink="https://www.gurock.com/testrail/docs/user-guide/getting-started/editor"
                    class="link-tooltip" tooltip-text="Open the editor formatting reference." target="_blank"
                    tabindex="-1">
                    <div class="icon-markdown-help"></div>
                  </a>
                </span>
                Expected Result
              </label>
              <div class="textarea-resizable">
                <textarea [(ngModel)]="testCase.expectedResult"
                  class="form-control form-control-full  processed textarea-with-grippie" rows="6" name="announcement"
                  id="announcement"></textarea>
                <div class="textarea-grippie"></div>
              </div>

              <div id="custom_expected_display_drop" class="dropzone dz-clickable" rel="custom_expected_display"
                dialog="" data-project-id="1">
                <div class="dz-default dz-message"><span>Drop images here to embed.</span></div>
              </div>

              <div class="form-description form-description-full">The expected result after executing
                the test case.</div>
            </div>
          </div>

          <div class="button-group">
            <button
              [disabled]="testCase.caseName.trim().length == 0 || !testCase.sectionId || !testCase.priorityId || !testCase.projectId"
              id="accept" type="button" (click)="submit()" class="button button-left button-positive button-ok">
              Add Test Case </button>
            <button [disabled]="testCase.caseName.trim().length == 0 || !testCase.sectionId || !testCase.priorityId"
              id="accept_and_next" type="button" (click)="submit()" name="save_and_next" value="1"
              class="button button-left button-positive button-ok">
              Add &amp; Next </button>
            <a (click)="backClicked()" class="button button-left button-negative button-cancel leave case-form-cancel">
              Cancel </a>
          </div>

        </form>
      </div>
    </div>
    <div id="sidebar-splitter" class="column splitter sidebar-splitter">
    </div>
    <div id="sidebar" class="column sidebar" style="width: 250px">
    </div>
  </div>

</div>
